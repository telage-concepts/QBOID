@page
@model IndexModel
@using QBOID.Models


@{
    ViewData["Title"] = "Home page";
}

<div class="text-center">
    <h1 class="display-4">Take a loan</h1>

</div>

<div class="row col-md-12">
    <div class="col-md-9">
        <form method="post" id="loanform">
            <div class="form-group">
                <label class="control-label">E-mail: </label>
                <input asp-for="Loan.Email" id="email" class="form-control">
                <span asp-validation-for="Loan.Email" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label class="control-label">Phone Number: </label>
                <input asp-for="Loan.PhoneNumber" id="PhoneNumber" class="form-control">
                <span asp-validation-for="Loan.PhoneNumber" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label class="control-label">Bank Verification Number: </label>
                <input asp-for="Loan.BankVerificationNumber" id="BVN" class="form-control">
                <span asp-validation-for="Loan.BankVerificationNumber" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label class="control-label">Bank Code: </label>
                <input asp-for="Loan.BankCode" id="BankCode" class="form-control" value="200">
                <span asp-validation-for="Loan.BankCode" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label class="control-label">Bank Account Number: </label>
                <input asp-for="Loan.BankAccountNumber" id="BankAccountNumber" class="form-control">
                <span asp-validation-for="Loan.BankAccountNumber" class="text-danger"></span>
            </div>


            <div class="form-group" action="action" method="GET">
                <label class="control-label">Employer Sector: </label>
                <select asp-for="Loan.EmployerRecord.EmployerSector" 
                asp-items="Html.GetEnumSelectList<EmployerSector>()" id="EmployerSector" class="form-control"></select>
                <span asp-validation-for="Loan.EmployerRecord.EmployerSector" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label class="control-label">Employment Type: </label>
                <select asp-for="Loan.EmployerRecord.EmploymentType" 
                asp-items="Html.GetEnumSelectList<EmploymentType>()" id="EmploymentType" class="form-control"></select>
                <span asp-validation-for="Loan.EmployerRecord.EmploymentType" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label class="control-label">Employer: </label>
                <input asp-for="Loan.EmployerRecord.EmployerName" id="EmployerName" class="form-control">
                <span asp-validation-for="Loan.EmployerRecord.EmployerName" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label class="control-label">Employer Address: </label>
                <input asp-for="Loan.EmployerRecord.EmployerAddress" id="EmployerAddress" class="form-control">
                <span asp-validation-for="Loan.EmployerRecord.EmployerAddress" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label class="control-label">City: </label>
                <input asp-for="Loan.EmployerRecord.City" id="EmployerCity" class="form-control">
                <span asp-validation-for="Loan.EmployerRecord.City" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label class="control-label">State: </label>
                <input asp-for="Loan.EmployerRecord.State" id="EmployerState" class="form-control">
                <span asp-validation-for="Loan.EmployerRecord.State" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label class="control-label">Employer Phone Number: </label>
                <input asp-for="Loan.EmployerRecord.EmployerPhone" id="EmployerPhoneNumber" class="form-control">
                <span asp-validation-for="Loan.EmployerRecord.EmployerPhone" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label class="control-label">Employment Date: </label>
                <input asp-for="Loan.EmployerRecord.EmploymentDate" id="EmploymentDate" class="form-control">
                <span asp-validation-for="Loan.EmployerRecord.EmploymentDate" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label class="control-label">Net Monthly Income: </label>
                <input asp-for="Loan.EmployerRecord.NetMonthlyIncome" id="NetMonthlyIncome" class="form-control">
                <span asp-validation-for="Loan.EmployerRecord.NetMonthlyIncome" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label class="control-label">Employment Duration: </label>
                <select asp-for="Loan.EmployerRecord.EmploymentDuration" 
                asp-items="Html.GetEnumSelectList<EmploymentLength>()" id="EmploymentDuration" class="form-control"></select>
                <span asp-validation-for="Loan.EmployerRecord.EmploymentDuration" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label class="control-label">Next Payday: </label>
                <input asp-for="Loan.EmployerRecord.NextPayDay" id="NextPayDay" class="form-control">
                <span asp-validation-for="Loan.EmployerRecord.EmploymentDate" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label class="control-label">Tolerance Days: </label>
                <input asp-for="Loan.EmployerRecord.ToleranceDays" id="ToleranceDays" class="form-control">
                <span asp-validation-for="Loan.EmployerRecord.ToleranceDays" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label class="control-label">Total Monthly Expense: </label>
                <input asp-for="Loan.EmployerRecord.TotalMonthlyExpense" id="TotalMonthlyExpense" class="form-control">
                <span asp-validation-for="Loan.EmployerRecord.TotalMonthlyExpense" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label class="control-label">Salary Frequency: </label>
                <select asp-for="Loan.EmployerRecord.SalaryFrequency" 
                asp-items="Html.GetEnumSelectList<PayFrequency>()" id="SalaryFrequency" class="form-control"></select>
                <span asp-validation-for="Loan.EmployerRecord.SalaryFrequency" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label class="control-label">Income Receipt Mode: </label>
                <select asp-for="Loan.EmployerRecord.IncomeReceiptMode" 
                asp-items="Html.GetEnumSelectList<IncomeReceiptMode>()" id="EmploymentDuration" class="form-control"></select>
                <span asp-validation-for="Loan.EmployerRecord.IncomeReceiptMode" class="text-danger"></span>
            </div>

            <input type="submit" value="Submit" id="submit">
    </form>
    </div>
</div>
@section Scripts{
            <script src="https://devembed.azurewebsites.net/embed/js" type="text/javascript"></script>
            <script>
                @* var data= {
                        email: document.getElementById('email').value,
                        phoneNumber: document.getElementById('PhoneNumber').value,
                        bvn: document.getElementById('BVN').value,
                        apiKey: "@Model.apiKey",
                        authorisation:  '@ViewData["Authorisation"]',
                        requestKey: "@Model.requestKey",
                        loanId: "@Guid.NewGuid().ToString()",
                        bankCode: document.getElementById('BankCode').value,
                        BankAccountNumber: document.getElementById('BankAccountNumber').value,
                        employmentRecord: {
                            sector: document.getElementById('EmployerSector').value,
                            employmentType: document.getElementById('EmploymentType').value,
                            employerName : document.getElementById('EmployerName').value,
                            employerAddress : document.getElementById('EmployerAddress').value,
                            city : document.getElementById('EmployerCity').value,
                            state : document.getElementById('EmployerState').value,
                            employerPhone : document.getElementById('EmployerPhoneNumber').value,
                            employmentDate : document.getElementById('EmploymentDate').value,
                            netMonthlyIncome : document.getElementById('NetMonthlyIncome').value,
                            duration : document.getElementById("EmploymentDuration").value,
                            nextPayDay: document.getElementById("NextPayDay").value,
                            toleranceDays: document.getElementById("ToleranceDays").value,
                            totalMonthlyExpense: document.getElementById("TotalMonthlyExpense").value,
                            salaryFrequency: document.getElementById("SalaryFrequency").value,
                            incomeReceiptMode: document.getElementById("EmploymentDuration").value}}
                    var btn= document.getElementById('submit');
                    btn.addEventListener("mouseover", () =>{
                    loadMimEmbedded('submit', {
                        email: document.getElementById('email').value,
                        phoneNumber: document.getElementById('PhoneNumber').value,
                        bvn: document.getElementById('BVN').value,
                        apiKey: "@Model.apiKey",
                        authorisation:  '@ViewData["Authorisation"]',
                        requestKey: "@Model.requestKey",
                        loanId: "@Guid.NewGuid().ToString()",
                        bankCode: document.getElementById('BankCode').value,
                        BankAccountNumber: document.getElementById('BankAccountNumber').value,
                        employmentRecord: {
                            sector: document.getElementById('EmployerSector').value,
                            employmentType: document.getElementById('EmploymentType').value,
                            employerName : document.getElementById('EmployerName').value,
                            employerAddress : document.getElementById('EmployerAddress').value,
                            city : document.getElementById('EmployerCity').value,
                            state : document.getElementById('EmployerState').value,
                            employerPhone : document.getElementById('EmployerPhoneNumber').value,
                            employmentDate : document.getElementById('EmploymentDate').value,
                            netMonthlyIncome : document.getElementById('NetMonthlyIncome').value,
                            duration : document.getElementById("EmploymentDuration").value,
                            nextPayDay: document.getElementById("NextPayDay").value,
                            toleranceDays: document.getElementById("ToleranceDays").value,
                            totalMonthlyExpense: document.getElementById("TotalMonthlyExpense").value,
                            salaryFrequency: document.getElementById("SalaryFrequency").value,
                            incomeReceiptMode: document.getElementById("EmploymentDuration").value}})
                }) *@

            </script>
    }